<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veraxa</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./faq-styles.css">
    <link rel="stylesheet" href="./momentos-improvements.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4653147807800151" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Pantalla de Mantenimiento (debe estar al principio para mayor efectividad) -->
    <div class="maintenance-overlay" id="maintenanceOverlay" role="dialog" aria-modal="true" aria-labelledby="maintenance-title" aria-hidden="true">
        <div class="maintenance-content">
            <div class="maintenance-icon">
                <i class="fas fa-tools"></i>
            </div>
            <h1 class="maintenance-title" id="maintenance-title">Sitio en Mantenimiento</h1>
            <p class="maintenance-message">
                Estamos trabajando para mejorar tu experiencia.
                <br>
                Por favor, vuelve pronto hasta que se terminen las correcciones.
            </p>
            <p class="maintenance-details">
                Nuestro equipo está realizando actualizaciones importantes para ofrecerte un mejor servicio.
                <br>
                Gracias por tu paciencia.
            </p>
            <div class="maintenance-animation">
                <div class="maintenance-dot"></div>
                <div class="maintenance-dot"></div>
                <div class="maintenance-dot"></div>
            </div>
        </div>
    </div>

    <!-- Contenedor del aviso inicial (oculto por defecto cuando mantenimiento está activo) -->
    <div class="aviso-container hidden" id="aviso" style="display: none;">
        <div class="slider">
            <!-- Slide 1: Aviso sobre enlaces -->
            <div class="slide" id="slide1">
                <i class="fas fa-info-circle"></i>
                <h3>Descarga segura</h3>
                <p>Todos los enlaces dirigen a Google Play y App Store. No alojamos archivos APK ni versiones modificadas.</p>
            </div>

            <!-- Slide 2: Aviso sobre regiones -->
            <div class="slide" id="slide2">
                <i class="fas fa-globe"></i>
                <h3>Disponibilidad de apps</h3>
                <p>Algunas apps pueden no estar disponibles en tu país. Las aplicaciones se filtran automáticamente según tu región.</p>
                <div id="country-info" style="margin-top: 10px; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="user-country">Detectando tu país...</span>
                </div>
            </div>

            <!-- Slide 3: Registro de usuario -->
            <div class="slide" id="slide3">
                <i class="fas fa-user"></i>
                <h3>Tu perfil</h3>
                <input type="text" id="username" placeholder="Tu nombre" style="width: 80%; padding: 8px; border-radius: 8px; border: 1px solid #ccc; text-align: center;">
                <input type="file" id="file-input" accept="image/*" style="margin-top: 10px;">
                <br>
                <img id="profile-pic" src="https://via.placeholder.com/80" alt="Foto de perfil" style="width: 80px; height: 80px; border-radius: 50%; margin-top: 10px;">
            </div>

            <!-- Slide 4: Verificación -->
            <div class="slide" id="slide4">
                <i class="fas fa-check-circle"></i>
                <h3>Verificación completada</h3>
                <p class="verified"><span id="user-display">Usuario</span> <i class="fas fa-badge-check"></i></p>
            </div>

            <!-- Controles -->
            <div class="controls">
                <button class="btn" id="prevBtn" onclick="prevSlide()" disabled>Anterior</button>
                <button class="btn" id="nextBtn" onclick="nextSlide()">Siguiente</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <div class="header-container">
        <div class="left-section">
            <button class="icon-button menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="app-title">Veraxa</div>
        </div>
        <div class="right-section">
            <button class="icon-button search-toggle">
                <i class="fas fa-search"></i>
            </button>
            <button class="icon-button" id="momentosBtn">
                <i class="fas fa-comment-dots"></i>
            </button>
            <button class="icon-button" onclick="openSupportChat()">
                <i class="fas fa-headset"></i>
            </button>
            <button class="icon-button" id="settingsIcon">
                <i class="fas fa-cog"></i>
            </button>
        </div>
    </div>

    <div id="cameraModal" class="camera-modal">
        <div class="camera-content">
            <video id="cameraView" autoplay playsinline></video>
            <button id="captureButton" class="capture-button">
                <div class="capture-button-inner"></div>
            </button>
            <canvas id="particleCanvas"></canvas>
        </div>
    </div>

    <!-- Nueva Sección de Búsqueda -->
    <div class="search-section" id="searchSection">
        <div class="search-header">
            <button class="back-search-btn" id="backSearchBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="search-input-container">
                <input type="text" class="search-input-new" placeholder="Buscar aplicaciones, juegos, desarrolladores..." id="searchInputNew">
                <button class="clear-search-btn" id="clearSearchBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="search-body" id="searchBody">
            <div class="search-suggestions" id="searchSuggestions">
                <h3><i class="fas fa-fire"></i> Categorías Populares</h3>
                <div class="suggestions-grid">
                    <div class="suggestion-chip" data-category="Redes sociales">Redes Sociales</div>
                    <div class="suggestion-chip" data-category="Juegos">Juegos</div>
                    <div class="suggestion-chip" data-category="Entretenimiento">Entretenimiento</div>
                    <div class="suggestion-chip" data-category="Comunicación">Comunicación</div>
                    <div class="suggestion-chip" data-category="Finanzas">Finanzas</div>
                    <div class="suggestion-chip" data-category="Educación">Educación</div>
                </div>
            </div>
            <div class="search-results" id="searchResults" style="display: none;">
                <div class="search-results-header">
                    <span>Resultados</span>
                    <span class="search-results-count" id="resultsCount">0</span>
                </div>
                <div class="search-results-grid" id="searchResultsGrid"></div>
            </div>
            <div class="no-results" id="noResults" style="display: none;">
                <div class="no-results-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h3>No se encontraron resultados</h3>
                <p>Intenta con otros términos de búsqueda</p>
            </div>
        </div>
    </div>

    <!-- Modal de Configuración -->
    <div class="settings-modal" id="settingsModal">
        <div class="settings-content">
            <div class="settings-header">
                <h2>Configuración</h2>
                <button class="close-settings" id="closeSettings">&times;</button>
            </div>
            <div class="settings-body">
                <div class="settings-item" onclick="toggleDarkMode()">
                    <h3>Modo Claro/Oscuro</h3>
                    <i class="fas fa-moon"></i>
                </div>
                <div class="settings-item" onclick="showFaqSupport()">
                    <h3>FAQ y Soporte</h3>
                    <i class="fas fa-chevron-right"></i>
                </div>
                <div class="settings-item" onclick="openSupportChat()">
                    <h3>Chat de Soporte</h3>
                    <i class="fas fa-comments"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Información BeApp -->
    <div class="beapp-info-modal" id="beappInfoModal">
        <div class="beapp-info-content">
            <div class="beapp-info-header">
                <button class="back-to-settings" onclick="backToSettings()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2>Acerca de BeApp</h2>
            </div>
            <div class="beapp-info-body">
                <p>BeApp es una plataforma innovadora que se dedica a proporcionar a los usuarios una experiencia única en la descarga y gestión de aplicaciones. Nuestra misión es facilitar el acceso a las mejores aplicaciones mientras garantizamos la seguridad y calidad de cada descarga.</p>
                <p>Características principales:</p>
                <ul>
                    <li>Verificación de seguridad de todas las aplicaciones</li>
                    <li>Información detallada sobre cada aplicación</li>
                    <li>Actualizaciones en tiempo real</li>
                    <li>Soporte para múltiples plataformas</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Aplicaciones destacadas -->
    <div class="featured-apps" id="featuredApps">
        <!-- Los banners destacados se generarán aquí -->
    </div>

    <!-- Contenedor de aplicaciones -->
    <div class="apps-container" id="appsContainer">
        <!-- Las aplicaciones se generarán dinámicamente aquí -->
    </div>

    <!-- Modal de detalles de la aplicación -->
    <div class="fullscreen-modal" id="appModal">
        <div class="modal-header">
            <button class="back-button" id="backButton">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h2>Detalles de la aplicación</h2>
            <div style="width: 24px;"></div>
        </div>
        <div class="modal-content" id="modalContent"></div>
    </div>

    <!-- Modal de aplicaciones del desarrollador -->
    <div class="developer-apps-modal" id="developerModal">
        <div class="developer-apps-content">
            <button class="close-developer-modal" id="closeDeveloperModal">
                <i class="fas fa-times"></i>
            </button>
            <h3>Aplicaciones del desarrollador</h3>
            <div id="developerApps"></div>
        </div>
    </div>

    <!-- Modal de Momentos -->
    <div class="momentos-modal" id="momentosModal">
        <div class="momentos-content">
            <div class="momentos-header">
                <button class="back-momentos" id="backMomentos">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2>Momentos</h2>
                <button class="new-post-btn" id="newPostBtn">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            
            <!-- Formulario para nuevo post -->
            <div class="new-post-form" id="newPostForm" style="display: none;">
                <div class="post-composer">
                    <textarea id="postContent" placeholder="¿Qué está pasando?..." maxlength="280"></textarea>
                    <div class="post-actions">
                        <div class="post-actions-left">
                            <span class="char-count">280</span>
                        </div>
                        <button class="publish-btn" id="publishBtn">
                            <i class="fas fa-paper-plane"></i>
                            Publicar
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Feed de posts -->
            <div class="momentos-feed" id="momentosFeed">
                <div class="loading-posts">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Cargando momentos...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de FAQ y Soporte -->
    <div class="faq-modal" id="faqModal">
        <div class="faq-content">
            <div class="faq-header">
                <button class="back-to-settings" onclick="backToSettings()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2>FAQ y Soporte</h2>
            </div>
            <div class="faq-search">
                <i class="fas fa-search"></i>
                <input type="text" id="faqSearch" placeholder="Buscar artículos...">
            </div>
            <div class="faq-body">
                <div class="faq-category">
                    <h3 class="category-title"><i class="fas fa-info-circle"></i> Información General</h3>
                    <div class="faq-item" onclick="showFaqArticle('about')">
                        <div class="faq-item-content">
                            <h4>¿Qué es Veraxa?</h4>
                            <p>Conoce nuestra plataforma</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="faq-item" onclick="showFaqArticle('features')">
                        <div class="faq-item-content">
                            <h4>Características principales</h4>
                            <p>Descubre lo que ofrecemos</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="faq-item" onclick="showFaqArticle('security')">
                        <div class="faq-item-content">
                            <h4>Seguridad y privacidad</h4>
                            <p>Cómo protegemos tus datos</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>

                <div class="faq-category">
                    <h3 class="category-title"><i class="fas fa-download"></i> Instalación y Uso</h3>
                    <div class="faq-item" onclick="showFaqArticle('install')">
                        <div class="faq-item-content">
                            <h4>¿Cómo instalar aplicaciones?</h4>
                            <p>Guía paso a paso</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="faq-item" onclick="showFaqArticle('update')">
                        <div class="faq-item-content">
                            <h4>Actualizar aplicaciones</h4>
                            <p>Mantén tus apps al día</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="faq-item" onclick="showFaqArticle('uninstall')">
                        <div class="faq-item-content">
                            <h4>Desinstalar aplicaciones</h4>
                            <p>Elimina apps que no uses</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>

                <div class="faq-category">
                    <h3 class="category-title"><i class="fas fa-exclamation-triangle"></i> Solución de Problemas</h3>
                    <div class="faq-item" onclick="showFaqArticle('errors')">
                        <div class="faq-item-content">
                            <h4>Errores comunes</h4>
                            <p>Soluciones rápidas</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="faq-item" onclick="showFaqArticle('compatibility')">
                        <div class="faq-item-content">
                            <h4>Problemas de compatibilidad</h4>
                            <p>Apps que no funcionan</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="faq-item" onclick="showFaqArticle('performance')">
                        <div class="faq-item-content">
                            <h4>Mejorar rendimiento</h4>
                            <p>Optimiza tu experiencia</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>

                <div class="faq-category">
                    <h3 class="category-title"><i class="fas fa-question-circle"></i> Cuenta y Configuración</h3>
                    <div class="faq-item" onclick="showFaqArticle('account')">
                        <div class="faq-item-content">
                            <h4>Gestionar tu cuenta</h4>
                            <p>Perfil y configuración</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="faq-item" onclick="showFaqArticle('notifications')">
                        <div class="faq-item-content">
                            <h4>Notificaciones</h4>
                            <p>Controla tus alertas</p>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    

    <!-- Modal de Artículo FAQ con Discursos -->
    <div class="article-modal" id="articleModal">
        <div class="article-content">
            <div class="article-header">
                <button class="back-to-faq" onclick="backToFaq()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 id="articleTitle">Artículo</h2>
            </div>
            <div class="article-body" id="articleBody">
                <!-- Contenido del artículo -->
            </div>
            
            <!-- Sección de Discursos -->
            <div class="discursos-section">
                <div class="discursos-header">
                    <h3><i class="fas fa-comments"></i> Discursos</h3>
                    <span class="discursos-count" id="discursosCount">0 comentarios</span>
                </div>
                
                <div class="new-discurso-form">
                    <textarea id="discursoInput" placeholder="Comparte tu opinión sobre este artículo..." maxlength="280"></textarea>
                    <div class="discurso-actions">
                        <span class="char-count" id="discursoCharCount">280</span>
                        <button class="publish-discurso-btn" id="publishDiscursoBtn" disabled>
                            <i class="fas fa-paper-plane"></i> Publicar
                        </button>
                    </div>
                </div>
                
                <div class="discursos-feed" id="discursosFeed">
                    <div class="loading-discursos">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Cargando discursos...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Chat de Soporte -->
    <div class="support-chat-modal" id="supportChatModal">
        <div class="support-chat-content">
            <div class="support-chat-header">
                <div class="support-agent-info">
                    <div class="agent-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="agent-details">
                        <h3>Agente Virtual</h3>
                        <span class="agent-status">En línea</span>
                    </div>
                </div>
                <button class="close-support-chat" id="closeSupportChat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="support-chat-body" id="supportChatBody">
                <!-- Los mensajes se agregarán aquí dinámicamente -->
            </div>
            
            <div class="support-chat-input" id="supportChatInput">
                <div class="chat-input-container">
                    <input type="text" placeholder="Escribe tu mensaje..." id="chatMessageInput">
                    <button class="send-message-btn" id="sendMessageBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
            
            <!-- Formulario de contacto inicial -->
            <div class="chat-contact-form" id="chatContactForm">
                <div class="form-group">
                    <label>Correo Electrónico:</label>
                    <input type="email" id="chatEmailInput" placeholder="tu@email.com">
                </div>
                <div class="form-group">
                    <label>Descripción del problema:</label>
                    <textarea id="chatProblemInput" placeholder="Describe tu problema aquí..."></textarea>
                </div>
                <button class="submit-contact-btn" id="submitContactBtn">
                    <i class="fas fa-check"></i> Enviar
                </button>
            </div>
            
            <!-- Selector de aplicaciones -->
            <div class="app-selector-container" id="appSelectorContainer" style="display: none;">
                <div class="app-selector-header">
                    <h3>Selecciona la aplicación con la que tienes problemas:</h3>
                </div>
                <div class="app-carousel" id="appCarousel">
                    <!-- Las aplicaciones se cargarán aquí -->
                </div>
                <div class="app-selector-actions">
                    <button class="confirm-app-btn" id="confirmAppBtn" disabled>
                        <i class="fas fa-check"></i> Confirmar Aplicación
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Side Menu -->
    <nav class="side-menu">
        <a href="#" class="menu-item active">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="#games" class="menu-item" onclick="showGamesSection()">
            <i class="fas fa-gamepad"></i>
            <span>Games</span>
        </a>
        <a href="#websites" class="menu-item" onclick="showWebsitesSection()">
            <i class="fas fa-globe"></i>
            <span>Websites</span>
        </a>
        <a href="#editorial" class="menu-item" onclick="showEditorialSection()">
            <i class="fas fa-edit"></i>
            <span>Editorial</span>
        </a>
    </nav>

    <!-- Websites Section -->
    <div id="websitesSection" class="section-container" style="display: none;">
        <h2 class="section-title">Popular Websites</h2>
        <div id="websitesContainer" class="apps-grid"></div>
    </div>

    <!-- Games Section -->
    <div id="gamesSection" class="section-container" style="display: none;">
        <h2 class="section-title">Games</h2>
        <div id="gamesContainer" class="apps-grid"></div>
    </div>

    <!-- Editorial Section -->
    <div id="editorialSection" class="section-container" style="display: none;">
        <h2 class="section-title">Developer's Guide</h2>
        <div class="editorial-content">
            <h3>How to Become a Developer</h3>
            <div class="steps-container">
                <div class="step-card">
                    <i class="fas fa-code"></i>
                    <h4>1. Create Your App</h4>
                    <p>Develop your application using best practices and ensure it meets our quality standards.</p>
                </div>
                <div class="step-card">
                    <i class="fas fa-check-circle"></i>
                    <h4>2. Test Your App</h4>
                    <p>Thoroughly test your application for bugs and ensure it works across different devices.</p>
                </div>
                <div class="step-card">
                    <i class="fas fa-upload"></i>
                    <h4>3. Submit for Review</h4>
                    <p>Submit your application for review. Our team will check for quality and security.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript para el aviso inicial -->
    <script>
        let currentSlide = 1;

        // Muestra la primera página y oculta las demás
        function updateSlide() {
            // Ocultar todos los slides
            for (let i = 1; i <= 4; i++) {
                const slide = document.getElementById("slide" + i);
                if (slide) slide.style.display = "none";
            }

            // Mostrar solo el slide actual
            const currentSlideElement = document.getElementById("slide" + currentSlide);
            if (currentSlideElement) currentSlideElement.style.display = "block";

            // Habilitar/deshabilitar botones
            const prevBtn = document.getElementById("prevBtn");
            const nextBtn = document.getElementById("nextBtn");
            if (prevBtn) prevBtn.disabled = currentSlide === 1;
            if (nextBtn) nextBtn.innerText = currentSlide === 4 ? "Comenzar" : "Siguiente";
        }

        function nextSlide() {
            if (currentSlide < 4) {
                currentSlide++;
                updateSlide();
            } else {
                const aviso = document.getElementById("aviso");
                if (aviso) {
                    aviso.classList.add("hidden");
                    localStorage.setItem("avisoMostrado", "true");
                }
            }
        }

        function prevSlide() {
            if (currentSlide > 1) {
                currentSlide--;
                updateSlide();
            }
        }

        // Actualizar nombre y foto de perfil
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById("file-input");
            if (fileInput) {
                fileInput.addEventListener("change", function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const profilePic = document.getElementById("profile-pic");
                            if (profilePic) profilePic.src = e.target.result;
                        }
                        reader.readAsDataURL(file);
                    }
                });
            }

            const usernameInput = document.getElementById("username");
            if (usernameInput) {
                usernameInput.addEventListener("input", function() {
                    const userDisplay = document.getElementById("user-display");
                    if (userDisplay) userDisplay.innerText = this.value || "Usuario";
                });
            }

            // Ocultar aviso siempre
            const aviso = document.getElementById("aviso");
            if (aviso) {
                aviso.style.display = "none";
                aviso.classList.add("hidden");
            }
            localStorage.setItem("avisoMostrado", "true");

            // Inicializar el primer slide
            updateSlide();
        });
    </script>

    <!-- JavaScript principal -->
    <script src="./script.js?v=2.0"></script>
    <script src="./faq-discursos.js"></script>
    <script src="./momentos-improvements.js"></script>
    <script src="./script-patch.js"></script>
</body>
</html>